(function(){"use strict";var e={9787:function(e,t,a){var i=a(9963),n=a(6252);const l=(0,n._)("nav",null,[(0,n._)("div",null,"高雄捷運查詢")],-1);function r(e,t){const a=(0,n.up)("router-link"),i=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[l,(0,n._)("div",null,[(0,n.Wm)(a,{to:"/"})]),(0,n.Wm)(i)],64)}var o=a(3744);const s={},u=(0,o.Z)(s,[["render",r]]);var v=u,p=a(2201);const c=e=>((0,n.dD)("data-v-4896f862"),e=e(),(0,n.Cn)(),e),d={class:"home"},m={class:"selectLine"},S=c((()=>(0,n._)("option",{disabled:"true",value:"2"},"請選擇搭乘路線",-1))),T=c((()=>(0,n._)("option",{value:"0"},"橘線",-1))),f=c((()=>(0,n._)("option",{value:"1"},"紅線",-1))),g=[S,T,f];function h(e,t,a,l,r,o){const s=(0,n.up)("GetLine"),u=(0,n.up)("GetRoute"),v=(0,n.up)("GetTravelTime"),p=(0,n.up)("GetStationTimeTable");return(0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",m,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectStationOfLine=e)},g,512),[[i.bM,l.selectStationOfLine]])]),(0,n.Wm)(s,{stationOfLine:l.stationOfLine,selectStationOfLine:l.selectStationOfLine,onPersonalTravel:l.searchHandler},null,8,["stationOfLine","selectStationOfLine","onPersonalTravel"]),(0,n.Wm)(u,{station:l.personalTravel.station,passStation:l.personalTravel.passStation,departureStation:l.personalTravel.departureStation,arrivalStation:l.personalTravel.arrivalStation,isSearch:l.personalTravel.isSearch},null,8,["station","passStation","departureStation","arrivalStation","isSearch"]),(0,n.Wm)(v,{personalTravel:l.personalTravel,onEstimateTime:l.estimateTimeHandler},null,8,["personalTravel","onEstimateTime"]),(0,n.Wm)(p,{personalTravel:l.personalTravel,selectStationOfLine:l.selectStationOfLine,estimateTime:l.estimateTime},null,8,["personalTravel","selectStationOfLine","estimateTime"])])}var w=a(3577);const _=e=>((0,n.dD)("data-v-7118d817"),e=e(),(0,n.Cn)(),e),O={class:"selectStation-container"},b={class:"selectStation-table"},D={class:"selectStation-item"},L=_((()=>(0,n._)("div",{class:"title"},"出發",-1))),k={class:"stationName"},y=_((()=>(0,n._)("option",{disabled:"true",value:"0"},"請選擇起始站",-1))),H=["value"],P={class:"selectStation-item"},R=_((()=>(0,n._)("span",null,"<====>",-1))),C=[R],F={class:"selectStation-item"},M=_((()=>(0,n._)("div",{class:"title"},"抵達",-1))),x={class:"stationName"},A=_((()=>(0,n._)("option",{disabled:"true",value:"0"},"請選擇抵達站",-1))),N=["value"],K={class:"selectStation-search"};function z(e,t,a,l,r,o){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",O,[(0,n._)("div",b,[(0,n._)("div",D,[L,(0,n._)("div",k,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.propsDepartureStation=e)},[y,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.propsStation,(e=>((0,n.wg)(),(0,n.iD)("option",{value:e,key:e},(0,w.zw)(e),9,H)))),128))],512),[[i.bM,l.propsDepartureStation]])])]),(0,n._)("div",P,[(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>l.changeHandler&&l.changeHandler(...e))},C)]),(0,n._)("div",F,[M,(0,n._)("div",x,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.propsArrivalStation=e)},[A,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.propsStation,(e=>((0,n.wg)(),(0,n.iD)("option",{value:e,key:e},(0,w.zw)(e),9,N)))),128))],512),[[i.bM,l.propsArrivalStation]])])])]),(0,n._)("div",K,[(0,n._)("button",{onClick:t[3]||(t[3]=(...e)=>l.propsSearch&&l.propsSearch(...e))},"搜尋")])],512)),[[i.F8,l.propsSelectStationOfLine<=1]])}var Z=a(2262),B={name:"get-line",props:["stationOfLine","selectStationOfLine"],setup(e,{emit:t}){const a=(0,Z.iH)("0"),i=(0,Z.iH)("0"),l=(0,Z.iH)(!1),r=(0,Z.BK)(e),o=(0,n.Fl)((()=>r.selectStationOfLine.value)),s=(0,n.Fl)((()=>o.value>1?void 0:r.stationOfLine.value[o.value].Stations.map((e=>e.StationName.Zh_tw)))),u=()=>{0!=a.value&&0!=i.value?a.value!=i.value?(l.value=!0,t("personalTravel",[a,i,v,p,l,s])):alert("請選擇不同的起始站及抵達站"):alert("請選擇起始站及抵達站")},v=(0,n.Fl)((()=>"0"==o.value?s.value.indexOf(a.value)>s.value.indexOf(i.value)?"西子灣":"大寮":"1"==o.value?s.value.indexOf(a.value)>s.value.indexOf(i.value)?"小港":"南岡山":[])),p=(0,n.Fl)((()=>({departureStation:s.value.indexOf(a.value),arrivalStation:s.value.indexOf(i.value)}))),c=()=>{[a.value,i.value]=[i.value,a.value]},d=()=>{l.value=!1};return(0,n.YP)((()=>[a.value,i.value]),(()=>{d()})),(0,n.YP)((()=>o.value),(()=>{a.value=0,i.value=0})),{getProps:r,propsSelectStationOfLine:o,propsStation:s,propsDepartureStation:a,propsArrivalStation:i,propsSearch:u,direction:v,passStation:p,changeHandler:c,isSearch:l,isSearchFalse:d}}};const G=(0,o.Z)(B,[["render",z],["__scopeId","data-v-7118d817"]]);var Y=G;const q=e=>((0,n.dD)("data-v-0e6a1054"),e=e(),(0,n.Cn)(),e),j={key:0,class:"timeTable"},U={class:"title"},W=q((()=>(0,n._)("span",null,"列車到站",-1))),I={class:"direction-container"},J={key:0,class:"orange"},E={key:1,class:"red"},V={class:"direction"},Q={class:"timeTable-container"},X={class:"time"},$={class:"time"},ee=q((()=>(0,n._)("br",null,null,-1)));function te(e,t,a,i,l,r){return(0,n.wg)(),(0,n.iD)("div",null,[i.getProps.personalTravel.value.isSearch?((0,n.wg)(),(0,n.iD)("div",j,[(0,n._)("div",U,[W,(0,n._)("div",I,[(0,n.Uk)(" 往 "),0==i.getProps.selectStationOfLine.value?((0,n.wg)(),(0,n.iD)("span",J,"橘線")):1==i.getProps.selectStationOfLine.value?((0,n.wg)(),(0,n.iD)("span",E,"紅線")):(0,n.kq)("",!0),(0,n._)("span",V,(0,w.zw)(i.getProps.personalTravel.value.direction),1)])]),(0,n._)("div",Q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.getTimeTable.slice(0,10),((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"timeTable-item",key:e.Sequence},[(0,n._)("div",X,(0,w.zw)(e.ArrivalTime),1),(0,n._)("div",$,(0,w.zw)(i.estimateArrivedTime.slice(0,10)[t]),1)])))),128)),ee])])):(0,n.kq)("",!0)])}a(7658);var ae=a(196);function ie(e){const t=(0,Z.iH)(null),a=(0,Z.iH)(null);function i(){t.value=null,a.value=null,ae.ZP.get((0,Z.SU)(e)).then((e=>{t.value=e.data})).catch((e=>{a.value=e}))}return(0,Z.dq)(e)?(0,n.m0)(i):i(),{data:t,error:a}}function ne(){const e=(0,Z.iH)(null),{data:t}=ie("https://ptx.transportdata.tw/MOTC/v2/Rail/Metro/StationTimeTable/KRTC?%24format=JSON");return e.value=t,{StationTimeTable:e}}var le={name:"get-station-time-table",props:["personalTravel","selectStationOfLine","estimateTime"],setup(e){const{StationTimeTable:t}=ne(),a=(0,Z.BK)(e),i=(0,n.Fl)((()=>{let e=(new Date).getDay(),t=(new Date).getHours(),a=(new Date).getMinutes(),i=["假日","平日","平日","平日","平日","平日","平日"];return{ServiceTag:i[e],hour:t,minute:a}})),l=(0,n.Fl)((()=>t.value.value?t.value.value.filter((e=>e.StationName.Zh_tw===a.personalTravel.value.departureStation&&e.DestinationStationName.Zh_tw==a.personalTravel.value.direction&&e.ServiceDay.ServiceTag===i.value.ServiceTag)):void 0)),r=(0,n.Fl)((()=>l.value?l.value[0].Timetables.filter((e=>e.ArrivalTime.slice(0,2)>=i.value.hour)).filter((e=>e.ArrivalTime.slice(0,2)!=i.value.hour||e.ArrivalTime.slice(-2)>i.value.minute)):void 0)),o=(0,n.Fl)((()=>{const e=r.value.map((e=>String(Number(e.ArrivalTime.slice(-2))+a.estimateTime.value)-60*Math.floor((Number(e.ArrivalTime.slice(-2))+a.estimateTime.value)/60))),t=r.value.map((e=>Number(e.ArrivalTime.slice(0,2))+Math.floor((Number(e.ArrivalTime.slice(-2))+a.estimateTime.value)/60))),i=[];for(let a=0;a<t.length;a++)e[a]<10?i.push(t[a]+":0"+e[a]):i.push(t[a]+":"+e[a]);return i}));return{StationTimeTable:t,filterTimeTable:l,getProps:a,today:i,getTimeTable:r,estimateArrivedTime:o}}};const re=(0,o.Z)(le,[["render",te],["__scopeId","data-v-0e6a1054"]]);var oe=re;const se=e=>((0,n.dD)("data-v-edfe760e"),e=e(),(0,n.Cn)(),e),ue={key:0,class:"estimateTime"},ve=se((()=>(0,n._)("div",{class:"title"},"預計乘車時間",-1)));function pe(e,t,a,i,l,r){return(0,n.wg)(),(0,n.iD)("div",null,[i.getProps.personalTravel.value.isSearch?((0,n.wg)(),(0,n.iD)("div",ue,[ve,(0,n._)("span",null,(0,w.zw)(i.estimateTime)+"分鐘",1)])):(0,n.kq)("",!0)])}function ce(){const e=(0,Z.iH)(null),{data:t}=ie("https://ptx.transportdata.tw/MOTC/v2/Rail/Metro/S2STravelTime/KRTC?%24format=JSON");return e.value=t,{TravelTime:e}}var de={name:"get-travel-time",props:["personalTravel"],setup(e,{emit:t}){const{TravelTime:a}=ce(),i=(0,Z.BK)(e),l=(0,n.Fl)((()=>a.value.value.map((e=>e.TravelTimes.map((e=>({RunTime:e.RunTime,StopTime:e.StopTime}))))))),r=(0,n.Fl)((()=>{const e={"大寮":"0","西子灣":"1","南岡山":"2","小港":"3"};return e[i.personalTravel.value.direction]})),o=(0,n.Fl)((()=>l.value[r.value])),s=(0,n.Fl)((()=>{let e,t;return i.personalTravel.value.passStation.departureStation>i.personalTravel.value.passStation.arrivalStation?(e=o.value.slice(o.value.length-i.personalTravel.value.passStation.departureStation,o.value.length-i.personalTravel.value.passStation.arrivalStation).map((e=>e.RunTime-e.StopTime)).reduce(((e,t)=>e+t)),t=o.value.slice(o.value.length-i.personalTravel.value.passStation.departureStation,o.value.length-i.personalTravel.value.passStation.arrivalStation)[0].StopTime):(e=o.value.slice(i.personalTravel.value.passStation.departureStation,i.personalTravel.value.passStation.arrivalStation).map((e=>e.RunTime-e.StopTime)).reduce(((e,t)=>e+t)),t=o.value.slice(i.personalTravel.value.passStation.departureStation,i.personalTravel.value.passStation.arrivalStation)[0].StopTime),Math.ceil((e+t)/60)}));return(0,n.YP)((()=>i.personalTravel.value.passStation),(()=>{t("estimateTime",s.value)})),{TravelTime:a,filterTravelTime:l,direction:r,getProps:i,selectLineTravelTime:o,estimateTime:s}}};const me=(0,o.Z)(de,[["render",pe],["__scopeId","data-v-edfe760e"]]);var Se=me;const Te=e=>((0,n.dD)("data-v-57e23a3a"),e=e(),(0,n.Cn)(),e),fe={key:0,class:"route"},ge=Te((()=>(0,n._)("div",{class:"title"},"行車路線",-1))),he={class:"route-container"},we={class:"route-item"},_e={class:"route-item"},Oe={key:0},be={class:"route-item"};function De(e,t,a,i,l,r){return(0,n.wg)(),(0,n.iD)("div",null,[i.getProps.isSearch.value?((0,n.wg)(),(0,n.iD)("div",fe,[ge,(0,n._)("div",he,[(0,n._)("div",we,(0,w.zw)(i.getProps.departureStation.value),1),(0,n._)("div",_e,[(0,n._)("span",null,[(0,n.Uk)((0,w.zw)(i.getRoute.length-1+"站")+" ",1),i.getRoute.length-1>1?((0,n.wg)(),(0,n.iD)("span",Oe," -- ")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.getRoute.slice(1,-1),((e,t)=>((0,n.wg)(),(0,n.iD)("span",{class:"station",key:i.getRoute[t]},(0,w.zw)(e),1)))),128))])]),(0,n._)("div",be,(0,w.zw)(i.getProps.arrivalStation.value),1)])])):(0,n.kq)("",!0)])}var Le={name:"get-route",props:["station","passStation","departureStation","arrivalStation","isSearch"],setup(e){const t=(0,Z.BK)(e),a=(0,n.Fl)((()=>{const e=t.station.value.slice();return t.passStation.value.departureStation>t.passStation.value.arrivalStation?e.slice(t.passStation.value.arrivalStation,t.passStation.value.departureStation+1).reverse():e.slice(t.passStation.value.departureStation,t.passStation.value.arrivalStation+1)}));return{getProps:t,getRoute:a}}};const ke=(0,o.Z)(Le,[["render",De],["__scopeId","data-v-57e23a3a"]]);var ye=ke;function He(){const e=(0,Z.iH)(null),{data:t}=ie("https://ptx.transportdata.tw/MOTC/v2/Rail/Metro/StationOfLine/KRTC?%24format=JSON");return e.value=t,{stationOfLine:e}}function Pe(){const e=(0,Z.iH)(null),{data:t}=ie("https://ptx.transportdata.tw/MOTC/v2/Rail/Metro/LiveBoard/KRTC?%24format=JSON");return e.value=t,{LiveBoard:e}}var Re={components:{GetLine:Y,GetStationTimeTable:oe,GetTravelTime:Se,GetRoute:ye},setup(){const e=(0,Z.iH)("2"),{stationOfLine:t}=He(),{TravelTime:a}=ce(),{LiveBoard:i}=Pe(),n=(0,Z.iH)(""),l=(0,Z.iH)(""),r=e=>{n.value={departureStation:e[0],arrivalStation:e[1],direction:e[2],passStation:e[3].value,isSearch:e[4],station:e[5]}},o=e=>{l.value=e};return{stationOfLine:t,TravelTime:a,LiveBoard:i,selectStationOfLine:e,searchHandler:r,personalTravel:n,estimateTimeHandler:o,estimateTime:l}}};const Ce=(0,o.Z)(Re,[["render",h],["__scopeId","data-v-4896f862"]]);var Fe=Ce;const Me=[{path:"/",name:"home",component:Fe}],xe=(0,p.p7)({history:(0,p.r5)(),routes:Me});var Ae=xe;(0,i.ri)(v).use(Ae).mount("#app")}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,i,n,l){if(!i){var r=1/0;for(v=0;v<e.length;v++){i=e[v][0],n=e[v][1],l=e[v][2];for(var o=!0,s=0;s<i.length;s++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](i[s])}))?i.splice(s--,1):(o=!1,l<r&&(r=l));if(o){e.splice(v--,1);var u=n();void 0!==u&&(t=u)}}return t}l=l||0;for(var v=e.length;v>0&&e[v-1][2]>l;v--)e[v]=e[v-1];e[v]=[i,n,l]}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,l,r=i[0],o=i[1],s=i[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(s)var v=s(a)}for(t&&t(i);u<r.length;u++)l=r[u],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(v)},i=self["webpackChunkkrtcsearch"]=self["webpackChunkkrtcsearch"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(9787)}));i=a.O(i)})();
//# sourceMappingURL=app.9a82e852.js.map